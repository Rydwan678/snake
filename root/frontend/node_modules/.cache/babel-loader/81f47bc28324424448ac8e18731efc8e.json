{"ast":null,"code":"var _s = $RefreshSig$();\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\n\n/* eslint-disable react-hooks/exhaustive-deps */\nimport { useEffect, useState } from \"react\";\nimport useGameLogic from \"./useGameLogic\";\nexport default function useGame(render) {\n  _s();\n\n  const gameLogic = useGameLogic();\n  const [gameData, setGameData] = useState(gameLogic.gameDataRef.current);\n  useEffect(() => {\n    setGameData(previousData => ({ ...previousData,\n      isRunning: gameLogic.gameDataRef.current.isRunning\n    }));\n  }, [gameLogic.gameDataRef.current.isRunning]);\n  useEffect(() => {\n    const timeout = setTimeout(async () => {\n      while (gameData.isRunning) {\n        setGameData({ ...gameLogic.gameDataRef.current\n        });\n        render();\n        await new Promise(r => setTimeout(r, 100));\n        let time = Date.now();\n        gameLogic.update(time);\n      }\n    }, 0);\n    return () => clearInterval(timeout);\n  }, [gameData.isRunning]);\n  return { ...gameLogic,\n    gameData\n  };\n}\n\n_s(useGame, \"HsxjgqhB5rg86Ito8al7KPnyzlw=\", false, function () {\n  return [useGameLogic];\n});","map":{"version":3,"names":["useEffect","useState","useGameLogic","useGame","render","gameLogic","gameData","setGameData","gameDataRef","current","previousData","isRunning","timeout","setTimeout","Promise","r","time","Date","now","update","clearInterval"],"sources":["C:/Users/rydwan/Documents/GitHub/snake/src/components/GameSite/useGame.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\r\n/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport useGameLogic from \"./useGameLogic\";\r\n\r\nexport default function useGame(render: () => void) {\r\n  const gameLogic = useGameLogic();\r\n\r\n  const [gameData, setGameData] = useState(gameLogic.gameDataRef.current);\r\n\r\n  useEffect(() => {\r\n    setGameData((previousData) => ({\r\n      ...previousData,\r\n      isRunning: gameLogic.gameDataRef.current.isRunning,\r\n    }));\r\n  }, [gameLogic.gameDataRef.current.isRunning]);\r\n\r\n  useEffect(() => {\r\n    const timeout = setTimeout(async () => {\r\n      while (gameData.isRunning) {\r\n        setGameData({ ...gameLogic.gameDataRef.current });\r\n\r\n        render();\r\n        await new Promise((r) => setTimeout(r, 100));\r\n        let time = Date.now();\r\n        gameLogic.update(time);\r\n      }\r\n    }, 0);\r\n    return () => clearInterval(timeout);\r\n  }, [gameData.isRunning]);\r\n\r\n  return { ...gameLogic, gameData };\r\n}\r\n"],"mappings":";;AAAA;;AACA;AACA,SAAgBA,SAAhB,EAA2BC,QAA3B,QAAmD,OAAnD;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AAEA,eAAe,SAASC,OAAT,CAAiBC,MAAjB,EAAqC;EAAA;;EAClD,MAAMC,SAAS,GAAGH,YAAY,EAA9B;EAEA,MAAM,CAACI,QAAD,EAAWC,WAAX,IAA0BN,QAAQ,CAACI,SAAS,CAACG,WAAV,CAAsBC,OAAvB,CAAxC;EAEAT,SAAS,CAAC,MAAM;IACdO,WAAW,CAAEG,YAAD,KAAmB,EAC7B,GAAGA,YAD0B;MAE7BC,SAAS,EAAEN,SAAS,CAACG,WAAV,CAAsBC,OAAtB,CAA8BE;IAFZ,CAAnB,CAAD,CAAX;EAID,CALQ,EAKN,CAACN,SAAS,CAACG,WAAV,CAAsBC,OAAtB,CAA8BE,SAA/B,CALM,CAAT;EAOAX,SAAS,CAAC,MAAM;IACd,MAAMY,OAAO,GAAGC,UAAU,CAAC,YAAY;MACrC,OAAOP,QAAQ,CAACK,SAAhB,EAA2B;QACzBJ,WAAW,CAAC,EAAE,GAAGF,SAAS,CAACG,WAAV,CAAsBC;QAA3B,CAAD,CAAX;QAEAL,MAAM;QACN,MAAM,IAAIU,OAAJ,CAAaC,CAAD,IAAOF,UAAU,CAACE,CAAD,EAAI,GAAJ,CAA7B,CAAN;QACA,IAAIC,IAAI,GAAGC,IAAI,CAACC,GAAL,EAAX;QACAb,SAAS,CAACc,MAAV,CAAiBH,IAAjB;MACD;IACF,CATyB,EASvB,CATuB,CAA1B;IAUA,OAAO,MAAMI,aAAa,CAACR,OAAD,CAA1B;EACD,CAZQ,EAYN,CAACN,QAAQ,CAACK,SAAV,CAZM,CAAT;EAcA,OAAO,EAAE,GAAGN,SAAL;IAAgBC;EAAhB,CAAP;AACD;;GA3BuBH,O;UACJD,Y"},"metadata":{},"sourceType":"module"}