{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rydwan\\\\Documents\\\\GitHub\\\\snake\\\\root\\\\frontend\\\\src\\\\pages\\\\Game\\\\GameField.tsx\",\n    _s = $RefreshSig$();\n\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useState, useEffect, useRef } from \"react\";\nimport useGame from \"./useGame\";\nimport Popup from \"./Popup\";\nimport CountingDown from \"./CountingDown\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function GameField(props) {\n  _s();\n\n  const snakeIcon = new Image();\n  snakeIcon.src = \"textures/snakegraphics.png\";\n  const appleIcon = new Image();\n  appleIcon.src = \"textures/apple.png\";\n  const brickIcon = new Image();\n  brickIcon.src = \"textures/brick.png\";\n  const canvasRef = useRef(null);\n  const focusRef = useRef(null);\n  const {\n    gameDataRef,\n    handleKeyDown,\n    startGame,\n    setRunning,\n    disableCounting,\n    setNewLevel\n  } = useGame(render, props.settings);\n  const [score, setScore] = useState(0);\n  const [level, setLevel] = useState(gameDataRef.current.level);\n  const [isRunning, setIsRunning] = useState(gameDataRef.current.isRunning);\n  const [popup, setPopup] = useState({\n    isShown: false,\n    type: \"\"\n  });\n  const [isCounting, setIsCounting] = useState(true);\n  const [bestScore, setBestScore] = useState(null);\n  useEffect(() => {\n    setScore(gameDataRef.current.score);\n    setIsRunning(gameDataRef.current.isRunning);\n    setLevel(gameDataRef.current.level);\n    setPopup({ ...gameDataRef.current.popup\n    });\n    setIsCounting(gameDataRef.current.isCounting);\n    focusRef.current.focus();\n    localStorage.getItem(\"bestscore\") !== null && setBestScore(parseInt(`${localStorage.getItem(\"bestscore\")}`));\n  }, [gameDataRef.current.snakePosition, gameDataRef.current.score, gameDataRef.current.isRunning, gameDataRef.current.level, gameDataRef.current.popup, gameDataRef.current.isCounting]);\n\n  function render() {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    canvas.width = 1024;\n    canvas.height = 1024;\n\n    const drawSnakeElements = (element, position) => {\n      let choosedElement = element[1];\n      let elementPosition = position;\n      ctx.drawImage(snakeIcon, choosedElement[0], choosedElement[1], 64, 64, elementPosition[0], elementPosition[1], 64, 64);\n    };\n\n    const chooseSnakeElement = () => {\n      const snakePosition = gameDataRef.current.snakePosition;\n      const applePosition = gameDataRef.current.applePosition;\n      ctx.drawImage(appleIcon, 0, 0, 64, 64, applePosition[0], applePosition[1], 64, 64);\n\n      for (let i = 0; i < snakePosition.length; i++) {\n        let currentElement = snakePosition[i];\n        let nextElement = snakePosition[i - 1];\n        let previousElement = snakePosition[i + 1]; // head\n\n        if (nextElement === undefined) {\n          for (const [key, value] of Object.entries(IMAGES)) {\n            if (previousElement[0] - currentElement[0] === value[2] && previousElement[1] - currentElement[1] === value[3]) {\n              drawSnakeElements([key, value], snakePosition[i]);\n              break;\n            }\n          }\n        } // tail\n        else if (previousElement === undefined) {\n          for (const [key, value] of Object.entries(IMAGES)) {\n            if (nextElement[0] - currentElement[0] === value[4] && nextElement[1] - currentElement[1] === value[5]) {\n              drawSnakeElements([key, value], snakePosition[i]);\n              break;\n            }\n          }\n        } // something else\n        else if (nextElement && previousElement) {\n          for (const [key, value] of Object.entries(IMAGES)) {\n            if (previousElement[0] - currentElement[0] === value[2] && previousElement[1] - currentElement[1] === value[3] && nextElement[0] - currentElement[0] === value[4] && nextElement[1] - currentElement[1] === value[5] || previousElement[0] - currentElement[0] === value[4] && previousElement[1] - currentElement[1] === value[5] && nextElement[0] - currentElement[0] === value[2] && nextElement[1] - currentElement[1] === value[3]) {\n              drawSnakeElements([key, value], snakePosition[i]);\n              break;\n            }\n          }\n        }\n      }\n    };\n\n    const drawBricks = () => {\n      const bricksPosition = gameDataRef.current.bricksPosition;\n\n      for (let i = 0; i < bricksPosition.length; i++) {\n        let brickPositionX = bricksPosition[i][0];\n        let brickPositionY = bricksPosition[i][1];\n        ctx.drawImage(brickIcon, 0, 0, 64, 64, brickPositionX, brickPositionY, 64, 64);\n      }\n    };\n\n    chooseSnakeElement();\n    drawBricks();\n  }\n\n  const IMAGES = {\n    headTop: [192, 0, 0, 64, null, null],\n    headDown: [256, 64, 0, -64, null, null],\n    headRight: [256, 0, -64, 0, null, null],\n    headLeft: [192, 64, 64, 0, null, null],\n    tailTop: [192, 128, null, null, 0, -64],\n    tailDown: [256, 192, null, null, 0, 64],\n    tailRight: [256, 128, null, null, 64, 0],\n    tailLeft: [192, 192, null, null, -64, 0],\n    torsoHorizontal: [64, 0, -64, 0, 64, 0],\n    torsoVertical: [128, 64, 0, -64, 0, 64],\n    cornerTop: [0, 64, 64, 0, 0, -64],\n    cornerDown: [128, 0, -64, 0, 0, 64],\n    cornerLeft: [128, 128, 0, -64, -64, 0],\n    cornerRight: [0, 0, 0, 64, 64, 0]\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"game-field\",\n    tabIndex: 1,\n    ref: focusRef,\n    onKeyDown: isRunning ? handleKeyDown : () => {},\n    children: [isCounting && /*#__PURE__*/_jsxDEV(CountingDown, {\n      setRunning: setRunning,\n      disableCounting: disableCounting\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 9\n    }, this), popup.isShown && /*#__PURE__*/_jsxDEV(Popup, {\n      type: popup.type,\n      level: level,\n      settings: props.settings,\n      score: gameDataRef.current.score,\n      bestScore: bestScore,\n      changePage: props.changePage,\n      startGame: startGame,\n      setNewLevel: setNewLevel,\n      handleKeyDown: handleKeyDown\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        alt: \"apple\",\n        src: \"textures/apple.png\",\n        className: \"apple-icon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: score\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this), bestScore && props.settings.gamemode === \"classicSnake\" && /*#__PURE__*/_jsxDEV(\"img\", {\n        alt: \"trophy\",\n        src: \"textures/trophy.png\",\n        className: \"trophy-icon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }, this), bestScore && props.settings.gamemode === \"classicSnake\" && /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: bestScore\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 11\n      }, this), props.settings.gamemode === \"bricksSnake\" && /*#__PURE__*/_jsxDEV(\"img\", {\n        alt: \"level\",\n        src: \"https://cdn3.iconfinder.com/data/icons/game-competition-flat/64/15_Top_Player_game_competition-512.png\",\n        className: \"level-icon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 11\n      }, this), props.settings.gamemode === \"bricksSnake\" && /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: level\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 55\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"canvas-field\",\n      tabIndex: 0,\n      children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 188,\n    columnNumber: 5\n  }, this);\n}\n\n_s(GameField, \"n+8a2SWNw0LEvssMotRX1foLL3M=\", false, function () {\n  return [useGame];\n});\n\n_c = GameField;\n\nvar _c;\n\n$RefreshReg$(_c, \"GameField\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useGame","Popup","CountingDown","GameField","props","snakeIcon","Image","src","appleIcon","brickIcon","canvasRef","focusRef","gameDataRef","handleKeyDown","startGame","setRunning","disableCounting","setNewLevel","render","settings","score","setScore","level","setLevel","current","isRunning","setIsRunning","popup","setPopup","isShown","type","isCounting","setIsCounting","bestScore","setBestScore","focus","localStorage","getItem","parseInt","snakePosition","canvas","ctx","getContext","width","height","drawSnakeElements","element","position","choosedElement","elementPosition","drawImage","chooseSnakeElement","applePosition","i","length","currentElement","nextElement","previousElement","undefined","key","value","Object","entries","IMAGES","drawBricks","bricksPosition","brickPositionX","brickPositionY","headTop","headDown","headRight","headLeft","tailTop","tailDown","tailRight","tailLeft","torsoHorizontal","torsoVertical","cornerTop","cornerDown","cornerLeft","cornerRight","changePage","gamemode"],"sources":["C:/Users/rydwan/Documents/GitHub/snake/root/frontend/src/pages/Game/GameField.tsx"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\nimport useGame from \"./useGame\";\r\nimport Popup from \"./Popup\";\r\nimport CountingDown from \"./CountingDown\";\r\nimport { Settings } from \"../../types\";\r\n\r\ninterface GameFieldProps {\r\n  changePage: () => void;\r\n  settings: Settings;\r\n}\r\n\r\nexport default function GameField(props: GameFieldProps) {\r\n  const snakeIcon = new Image();\r\n  snakeIcon.src = \"textures/snakegraphics.png\";\r\n  const appleIcon = new Image();\r\n  appleIcon.src = \"textures/apple.png\";\r\n  const brickIcon = new Image();\r\n  brickIcon.src = \"textures/brick.png\";\r\n\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const focusRef = useRef<HTMLInputElement>(null);\r\n\r\n  const {\r\n    gameDataRef,\r\n    handleKeyDown,\r\n    startGame,\r\n    setRunning,\r\n    disableCounting,\r\n    setNewLevel,\r\n  } = useGame(render, props.settings);\r\n  const [score, setScore] = useState(0);\r\n  const [level, setLevel] = useState(gameDataRef.current.level);\r\n  const [isRunning, setIsRunning] = useState(gameDataRef.current.isRunning);\r\n  const [popup, setPopup] = useState({\r\n    isShown: false,\r\n    type: \"\",\r\n  });\r\n  const [isCounting, setIsCounting] = useState(true);\r\n  const [bestScore, setBestScore] = useState<number | null>(null);\r\n\r\n  useEffect(() => {\r\n    setScore(gameDataRef.current.score);\r\n    setIsRunning(gameDataRef.current.isRunning);\r\n    setLevel(gameDataRef.current.level);\r\n    setPopup({ ...gameDataRef.current.popup });\r\n    setIsCounting(gameDataRef.current.isCounting);\r\n    focusRef.current!.focus();\r\n    localStorage.getItem(\"bestscore\") !== null &&\r\n      setBestScore(parseInt(`${localStorage.getItem(\"bestscore\")}`));\r\n  }, [\r\n    gameDataRef.current.snakePosition,\r\n    gameDataRef.current.score,\r\n    gameDataRef.current.isRunning,\r\n    gameDataRef.current.level,\r\n    gameDataRef.current.popup,\r\n    gameDataRef.current.isCounting,\r\n  ]);\r\n\r\n  function render() {\r\n    const canvas: HTMLCanvasElement = canvasRef.current!;\r\n    const ctx: any = canvas.getContext(\"2d\");\r\n    canvas.width = 1024;\r\n    canvas.height = 1024;\r\n\r\n    const drawSnakeElements = (\r\n      element: [string, number[] | (number | null)[]],\r\n      position: number[]\r\n    ) => {\r\n      let choosedElement = element[1];\r\n      let elementPosition = position;\r\n      ctx.drawImage(\r\n        snakeIcon,\r\n        choosedElement[0],\r\n        choosedElement[1],\r\n        64,\r\n        64,\r\n        elementPosition[0],\r\n        elementPosition[1],\r\n        64,\r\n        64\r\n      );\r\n    };\r\n\r\n    const chooseSnakeElement = () => {\r\n      const snakePosition = gameDataRef.current.snakePosition;\r\n      const applePosition = gameDataRef.current.applePosition;\r\n      ctx.drawImage(\r\n        appleIcon,\r\n        0,\r\n        0,\r\n        64,\r\n        64,\r\n        applePosition[0],\r\n        applePosition[1],\r\n        64,\r\n        64\r\n      );\r\n      for (let i = 0; i < snakePosition.length; i++) {\r\n        let currentElement = snakePosition[i];\r\n        let nextElement = snakePosition[i - 1];\r\n        let previousElement = snakePosition[i + 1];\r\n        // head\r\n        if (nextElement === undefined) {\r\n          for (const [key, value] of Object.entries(IMAGES)) {\r\n            if (\r\n              previousElement[0] - currentElement[0] === value[2] &&\r\n              previousElement[1] - currentElement[1] === value[3]\r\n            ) {\r\n              drawSnakeElements([key, value], snakePosition[i]);\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        // tail\r\n        else if (previousElement === undefined) {\r\n          for (const [key, value] of Object.entries(IMAGES)) {\r\n            if (\r\n              nextElement[0] - currentElement[0] === value[4] &&\r\n              nextElement[1] - currentElement[1] === value[5]\r\n            ) {\r\n              drawSnakeElements([key, value], snakePosition[i]);\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        // something else\r\n        else if (nextElement && previousElement) {\r\n          for (const [key, value] of Object.entries(IMAGES)) {\r\n            if (\r\n              (previousElement[0] - currentElement[0] === value[2] &&\r\n                previousElement[1] - currentElement[1] === value[3] &&\r\n                nextElement[0] - currentElement[0] === value[4] &&\r\n                nextElement[1] - currentElement[1] === value[5]) ||\r\n              (previousElement[0] - currentElement[0] === value[4] &&\r\n                previousElement[1] - currentElement[1] === value[5] &&\r\n                nextElement[0] - currentElement[0] === value[2] &&\r\n                nextElement[1] - currentElement[1] === value[3])\r\n            ) {\r\n              drawSnakeElements([key, value], snakePosition[i]);\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    const drawBricks = () => {\r\n      const bricksPosition = gameDataRef.current.bricksPosition;\r\n      for (let i = 0; i < bricksPosition.length; i++) {\r\n        let brickPositionX = bricksPosition[i][0];\r\n        let brickPositionY = bricksPosition[i][1];\r\n        ctx.drawImage(\r\n          brickIcon,\r\n          0,\r\n          0,\r\n          64,\r\n          64,\r\n          brickPositionX,\r\n          brickPositionY,\r\n          64,\r\n          64\r\n        );\r\n      }\r\n    };\r\n    chooseSnakeElement();\r\n    drawBricks();\r\n  }\r\n\r\n  const IMAGES = {\r\n    headTop: [192, 0, 0, 64, null, null],\r\n    headDown: [256, 64, 0, -64, null, null],\r\n    headRight: [256, 0, -64, 0, null, null],\r\n    headLeft: [192, 64, 64, 0, null, null],\r\n    tailTop: [192, 128, null, null, 0, -64],\r\n    tailDown: [256, 192, null, null, 0, 64],\r\n    tailRight: [256, 128, null, null, 64, 0],\r\n    tailLeft: [192, 192, null, null, -64, 0],\r\n    torsoHorizontal: [64, 0, -64, 0, 64, 0],\r\n    torsoVertical: [128, 64, 0, -64, 0, 64],\r\n    cornerTop: [0, 64, 64, 0, 0, -64],\r\n    cornerDown: [128, 0, -64, 0, 0, 64],\r\n    cornerLeft: [128, 128, 0, -64, -64, 0],\r\n    cornerRight: [0, 0, 0, 64, 64, 0],\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"game-field\"\r\n      tabIndex={1}\r\n      ref={focusRef}\r\n      onKeyDown={isRunning ? handleKeyDown : () => {}}\r\n    >\r\n      {isCounting && (\r\n        <CountingDown\r\n          setRunning={setRunning}\r\n          disableCounting={disableCounting}\r\n        />\r\n      )}\r\n      {popup.isShown && (\r\n        <Popup\r\n          type={popup.type}\r\n          level={level}\r\n          settings={props.settings}\r\n          score={gameDataRef.current.score}\r\n          bestScore={bestScore}\r\n          changePage={props.changePage}\r\n          startGame={startGame}\r\n          setNewLevel={setNewLevel}\r\n          handleKeyDown={handleKeyDown}\r\n        />\r\n      )}\r\n      <div className=\"game-info\">\r\n        <img alt=\"apple\" src=\"textures/apple.png\" className=\"apple-icon\"></img>\r\n        <h1>{score}</h1>\r\n        {bestScore && props.settings.gamemode === \"classicSnake\" && (\r\n          <img\r\n            alt=\"trophy\"\r\n            src=\"textures/trophy.png\"\r\n            className=\"trophy-icon\"\r\n          ></img>\r\n        )}\r\n        {bestScore && props.settings.gamemode === \"classicSnake\" && (\r\n          <h1>{bestScore}</h1>\r\n        )}\r\n        {props.settings.gamemode === \"bricksSnake\" && (\r\n          <img\r\n            alt=\"level\"\r\n            src=\"https://cdn3.iconfinder.com/data/icons/game-competition-flat/64/15_Top_Player_game_competition-512.png\"\r\n            className=\"level-icon\"\r\n          ></img>\r\n        )}\r\n        {props.settings.gamemode === \"bricksSnake\" && <h1>{level}</h1>}\r\n      </div>\r\n      <div className=\"canvas-field\" tabIndex={0}>\r\n        <canvas ref={canvasRef}></canvas>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}